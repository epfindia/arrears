(function () {
   //"use strict";
   
   var app = angular.module('demo',[]);
   		
   
   app.controller('app',["$scope",function ($scope) {
         $scope.x = 0;
         $scope.y = 0;
		 var actual=[2100, 4200, 4200, 4325, 4325, 16835, 4325, 4325, 4325, 4325, 4325, 4325, 4325, 4325, 4325, 4450, 4450, 4450, 4450, 4450, 4450, 4450, 4450, 4450, 4450, 4450, 4450, 4575, 4575, 4575, 4575, 4575, 4575, 4575, 4575, 4575, 4575, 4575, 4575, 4700, 13150, 13150, 13150, 13150, 13150, 13150, 13150, 13150, 13150, 13150, 13150, 13150, 13150, 13150, 13150, 13150, 13150, 13850, 13850, 13850, 13850, 13850, 13850, 13850, 13850, 13850, 13850, 13850, 13850, 14200, 14200, 14200, 14200, 14200, 14200, 14200, 14200, 14200, 14200, 14200, 14200, 14550, 14550, 20150, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 15250, 22875, 22875, 22875, 22875, 22875, 22875, 53375, 22875, 22875, 45750, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 95700, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 22875, 78575, 26125, 50350, 26125, 26125, 26125, 26125, 26125, 26125, 26125, 26125, 26125, 79609, 52867, 52867, 233892, 52867, 52867, 52867, 52867, 54458, 54458, 54458, 54458, 118542, 54458, 54458, 54458, 54458, 54458, 54458, 0, 0, 0, 0, 0, 0, 0, 0, 1062259, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
   var celing=[2500, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 5000, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 6500, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000, 15000];

         
         $scope.$watch("x*y", function (result) {
            console.log('new result',result);
            $scope.r = result;
         });
		 
		$scope.calculated=[];
		


		

		$scope.calculate_dues = function(){
			var arrayLength = celing.length;
			for (var i = 0; i < arrayLength; i++) {
				var demo={
			actual:0,
			ceiling:0,
			dues:0,
			deposited:0,
			progressive:0,
			difference:0
		};
				
				demo.actual=actual[i];
				demo.ceiling=celing[i];
				if(celing[i]<actual[i]){
					demo.dues=Math.round(celing[i]*0.0833+(actual[i]-celing[i])*0.095);
					demo.deposited=Math.round(celing[i]*0.0833);
				} else {
					demo.dues=Math.round(actual[i]*0.0833);
					demo.deposited=Math.round(actual[i]*0.0833);
				}
				if(i>0) {
					demo.progressive=$scope.calculated[i-1].progressive+$scope.calculated[i-1].difference;
				}
				demo.difference=demo.dues-demo.deposited;	
				//$scope.calculated.push(demo);
				$scope.calculated[i]=demo;

			}
			$scope.progressive_calc();
			//console.log($scope.calculated);
		}
		
		$scope.progressive_calc=function(){
			/*var arrayLength = celing.length;
			for (var i = 0; i < 22; i++) {
				var k = 4+12*i;
				var sum=0;
				var sum1=0;
				if(k>5){
				for (var j = 0; j < 12; j++){
					sum +=$scope.calculated[k-j-1].progressive;
					sum +=$scope.calculated[k-j-1].difference
				}
				$scope.calculated[k].progressive=sum;
				$scope.calculated[k].difference=sum1;
				}
				console.log(k);
			}*/
		}

		
		$scope.change = function(event){
			actual[0]=event.target.value;
			//console.log(event);
			console.log(event.target.value);
			$scope.calculate_dues();
		}
		
		$scope.calculate_dues();
      }]);
   
}());